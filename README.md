# Gemini Watermark Remover

[![Live Demo](https://img.shields.io/badge/demo-remove--watermark.mlaas.in-success?style=flat-square&logo=cloudflare&logoColor=white)](https://remove-watermark.mlaas.in)
[![Stack](https://img.shields.io/badge/tech-HTML%20%7C%20JS%20%7C%20Tailwind-3B82F6?style=flat-square)](https://github.com/dearabhin/gemini-watermark-remover)
[![License](https://img.shields.io/badge/license-MIT-orange?style=flat-square)](LICENSE)

A high-performance, **100% client-side** tool for removing watermarks from images generated by Google Gemini AI. Built with pure Vanilla JavaScript, it uses a mathematically precise **Reverse Alpha Blending** algorithm to restore pixels with zero quality loss.

**ğŸ”— Live Website:** [remove-watermark.mlaas.in](https://remove-watermark.pages.dev)

---

## ğŸš€ Features

* **100% Client-Side Processing:** No servers involved. Images are processed locally in your browser for maximum privacy.
* **Server-Side API:** Now includes a Node.js API to run processing on a server or within automated workflows.
* **Docker Ready:** Easily containerized with Docker and Docker Compose.
* **Lossless Restoration:** Uses exact mathematical inversion rather than AI inpainting, ensuring original pixel quality is preserved.
* **Zero Dependencies (Front-end):** Built with native ES6 Modules and Tailwind CSS (via CDN).
* **Auto-Detection:** Automatically detects watermark size (48px or 96px) based on image resolution.
* **Mobile Responsive:** Fully optimized UI for desktop and mobile devices.

---

## ğŸ§  How It Works (The Algorithm)

Gemini adds watermarks using a standard **Alpha Compositing** (blending) technique. This tool simply reverses that math.

### 1. The Watermark Formula
When Gemini generates an image, it applies the watermark logo using this formula:

$$Pixel_{final} = (\alpha \times Pixel_{logo}) + (1 - \alpha) \times Pixel_{original}$$

Where:
* `Î±` (Alpha): The transparency level of the watermark pixel (0.0 to 1.0).
* `Pixel_logo`: The color of the watermark (Pure White / 255).
* `Pixel_original`: The original color we want to recover.

### 2. The Solution (Reverse Engineering)
Since we know the `Pixel_final` (from your uploaded image), the `Pixel_logo` (White), and the `Î±` map (extracted from reference images), we can solve for `Pixel_original`:

$$Pixel_{original} = \frac{Pixel_{final} - (\alpha \times Pixel_{logo})}{1 - \alpha}$$

### 3. Alpha Map Extraction
The tool loads two reference "background" images (`bg_48.png` and `bg_96.png`) which contain the isolated watermark alpha values. It reads these values to construct a precise `Float32Array` map of transparency levels, allowing for pixel-perfect subtraction.

---

## ğŸ“‚ Project Structure

This project uses a simple, modern static site structure using ES6 Modules.

```text
gemini-remover/
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ bg_48.png        # Reference alpha map for small images
â”‚   â”œâ”€â”€ bg_96.png        # Reference alpha map for large images (>1024px)
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ alphaMap.js      # Logic to calculate transparency values
â”‚   â”œâ”€â”€ blendModes.js    # The math implementation (Reverse Formula)
â”‚   â”œâ”€â”€ engine.js        # Browser controller
â”‚   â””â”€â”€ app.js           # UI interaction
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ engine-node.js   # Node.js adaptation of the restoration engine
â”œâ”€â”€ server.js            # Express API server
â”œâ”€â”€ Dockerfile           # Docker configuration
â”œâ”€â”€ docker-compose.yml   # Docker Compose configuration
â””â”€â”€ index.html           # Main application file
```

## ğŸ› ï¸ Tech Stack

* **HTML5:** Semantic markup.
* **CSS:** [Tailwind CSS](https://tailwindcss.com/) (loaded via CDN for simplicity).
* **JavaScript:** Vanilla ES6+ (No frameworks like React or Vue).
* **Libraries:**
    * [Iconify](https://iconify.design/) (for icons).
    * (Optional) JSZip (if bulk download is implemented).

## âš¡ Running Locally

Since this project uses **ES6 Modules** (`import`/`export`), you cannot simply open `index.html` in a file explorer (CORS security rules will block the script loading). You must serve it via a local server.

### Option 1: VS Code (Recommended)
1.  Install the **"Live Server"** extension.
2.  Right-click `index.html`.
3.  Select **"Open with Live Server"**.

### Option 2: Python
If you have Python installed, open a terminal in the project folder and run:
```bash
# Python 3
python -m http.server 8000
```

## ğŸ³ Server API (Docker)

You can run the processing logic as a standalone API using Docker.

### 1. Run with Docker Compose
```bash
docker-compose up --build
```
The API will be available at `http://localhost:8002`.

### 2. API Usage
**Endpoint:** `POST /remove-watermark`

**Request Body:**
```json
{
  "imageUrl": "https://example.com/gemini-image.png",
  "outputType": "binary" // or "base64"
}
```

### 3. Troubleshooting (Node-Canvas Error)
If you encounter an `invalid ELF header` error when running with volumes on macOS, it's likely due to platform-specific binary headers in `node_modules`.
**Solution:**
```bash
docker compose down -v
docker compose up --build
```
This clears the anonymous volume and ensures a clean build for the container's architecture.

## âš ï¸ Disclaimer

This tool is for **educational and personal use only**.
* It only removes visible watermarks; it **does not** remove invisible SynthID watermarks embedded by Google.
* Please respect Google's Terms of Service and Intellectual Property rights.

## ğŸ¤ Credits

* Developed by **Abhin Krishna**.
* Algorithm adapted from [GeminiWatermarkTool](https://github.com/allenk/GeminiWatermarkTool).